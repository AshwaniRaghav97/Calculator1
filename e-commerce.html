<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mini Eâ€‘commerce â€” Single File</title>
  <style>
    :root{--accent:#0ea5a4;--muted:#6b7280;--card:#ffffff;--bg:#f3f4f6;}
    *{box-sizing:border-box}
    body{font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;margin:0;background:var(--bg);color:#111}
    header{background:linear-gradient(90deg,#06b6d4, #0ea5a4);color:white;padding:16px 24px;display:flex;gap:16px;align-items:center;justify-content:space-between}
    .brand{display:flex;gap:12px;align-items:center}
    .brand h1{font-size:18px;margin:0}
    .controls{display:flex;gap:10px;align-items:center}
    input[type=search]{padding:8px 12px;border-radius:8px;border:none;min-width:220px}
    .container{max-width:1100px;margin:20px auto;padding:0 16px}
    .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(220px,1fr));gap:16px}
    .card{background:var(--card);padding:12px;border-radius:12px;box-shadow:0 4px 10px rgba(2,6,23,0.06);display:flex;flex-direction:column}
    .card img{width:100%;height:150px;object-fit:cover;border-radius:8px}
    .card h3{margin:10px 0 6px 0;font-size:16px}
    .price-row{display:flex;justify-content:space-between;align-items:center}
    button{cursor:pointer}
    .btn{background:var(--accent);color:white;border:none;padding:8px 12px;border-radius:8px}
    .btn.ghost{background:transparent;border:1px solid rgba(0,0,0,0.06);color:inherit}
    .cart-toggle{position:relative}
    .cart-count{position:absolute;top:-6px;right:-6px;background:#ef4444;color:white;border-radius:50%;width:20px;height:20px;display:grid;place-items:center;font-size:12px}
    /* Cart sidebar */
    .cart{position:fixed;right:20px;top:80px;width:360px;max-width:calc(100% - 40px);background:white;border-radius:12px;box-shadow:0 10px 30px rgba(2,6,23,0.2);padding:16px;transform:translateX(110%);transition:transform .25s ease;z-index:40}
    .cart.open{transform:translateX(0)}
    .cart h2{margin:0 0 12px 0}
    .cart-list{max-height:360px;overflow:auto;display:flex;flex-direction:column;gap:12px;padding-right:8px}
    .cart-item{display:flex;gap:12px;align-items:center}
    .cart-item img{width:56px;height:56px;object-fit:cover;border-radius:8px}
    .qty{display:inline-flex;align-items:center;gap:6px}
    .qty button{width:28px;height:28px;border-radius:6px}
    .checkout{display:flex;justify-content:space-between;align-items:center;margin-top:12px}
    .empty{color:var(--muted);text-align:center;padding:28px 8px}
    footer{margin:40px 0 80px 0;text-align:center;color:var(--muted)}
    @media (max-width:640px){header{flex-direction:column;align-items:flex-start} .controls{width:100%;justify-content:space-between} .cart{right:12px;top:120px;width:92%}}
  </style>
</head>
<body>
  <header>
    <div class="brand">
      <svg width="36" height="36" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><rect x="2" y="4" width="20" height="16" rx="3" fill="white"/><path d="M6 9h12M6 13h8" stroke="rgba(0,0,0,0.12)" stroke-width="1.2" stroke-linecap="round"/></svg>
      <h1>Mini Shop</h1>
      <small style="color:rgba(255,255,255,0.9)">â€” single file demo</small>
    </div>

    <div class="controls">
      <input id="search" type="search" placeholder="Search products..." />
      <select id="sort" title="Sort">
        <option value="default">Sort: Featured</option>
        <option value="price-asc">Price: Low â†’ High</option>
        <option value="price-desc">Price: High â†’ Low</option>
      </select>

      <div class="cart-toggle">
        <button id="openCart" class="btn">Cart</button>
        <div id="cartCount" class="cart-count" style="display:none">0</div>
      </div>
    </div>
  </header>

  <main class="container">
    <section>
      <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:10px">
        <h2 style="margin:0">Products</h2>
        <div style="color:var(--muted)">Building in pure HTML/CSS/JS â€” LocalStorage powered</div>
      </div>

      <div id="products" class="grid"></div>
    </section>
  </main>

  <aside id="cart" class="cart" aria-hidden="true">
    <h2>Your Cart</h2>
    <div id="cartList" class="cart-list"></div>
    <div id="cartEmpty" class="empty">Your cart is empty â€” add something!</div>
    <div class="checkout">
      <div>
        <div style="font-weight:700">Total: â‚¹<span id="total">0</span></div>
        <div style="color:var(--muted);font-size:13px">Taxes included (demo)</div>
      </div>
      <div style="display:flex;flex-direction:column;gap:8px">
        <button id="checkoutBtn" class="btn">Checkout</button>
        <button id="clearBtn" class="btn ghost">Clear</button>
      </div>
    </div>
  </aside>

  <footer>
    <small>Built with ðŸ’œ â€¢ Single-file e-commerce demo â€¢ No backend</small>
  </footer>

  <script>
    // ---------- Sample product data ----------
    const PRODUCTS = [
      {id:1,title:'Stylish Sneakers',price:2499,desc:'Comfortable everyday sneakers',img:'https://via.placeholder.com/400x300?text=Sneakers'},
      {id:2,title:'Leather Wallet',price:799,desc:'Minimal leather wallet',img:'https://via.placeholder.com/400x300?text=Wallet'},
      {id:3,title:'Classic Watch',price:3499,desc:'Analog watch with leather strap',img:'https://via.placeholder.com/400x300?text=Watch'},
      {id:4,title:'Bluetooth Headset',price:1299,desc:'Noise-cancelling earbuds',img:'https://via.placeholder.com/400x300?text=Earbuds'},
      {id:5,title:'Sunglasses',price:699,desc:'Polarized shades',img:'https://via.placeholder.com/400x300?text=Sunglasses'},
      {id:6,title:'Backpack',price:1899,desc:'Durable daypack',img:'https://via.placeholder.com/400x300?text=Backpack'},
      {id:7,title:'Hoodie',price:1599,desc:'Cozy pullover hoodie',img:'https://via.placeholder.com/400x300?text=Hoodie'},
      {id:8,title:'Coffee Mug',price:299,desc:'Ceramic mug 350ml',img:'https://via.placeholder.com/400x300?text=Mug'}
    ];

    // ---------- App state ----------
    let state = {
      products: PRODUCTS.slice(),
      cart: JSON.parse(localStorage.getItem('mini_cart')||'{}') // {id:qty}
    };

    // ---------- Utilities ----------
    const formatMoney = n => n.toLocaleString('en-IN');

    // ---------- DOM references ----------
    const productsEl = document.getElementById('products');
    const cartEl = document.getElementById('cart');
    const cartListEl = document.getElementById('cartList');
    const cartCountEl = document.getElementById('cartCount');
    const totalEl = document.getElementById('total');
    const cartEmptyEl = document.getElementById('cartEmpty');
    const openCartBtn = document.getElementById('openCart');
    const searchInput = document.getElementById('search');
    const sortSelect = document.getElementById('sort');
    const checkoutBtn = document.getElementById('checkoutBtn');
    const clearBtn = document.getElementById('clearBtn');

    // ---------- Render functions ----------
    function renderProducts(items){
      productsEl.innerHTML = '';
      if(!items.length) { productsEl.innerHTML = '<div style="grid-column:1/-1;color:var(--muted);text-align:center;padding:36px 0">No products found</div>'; return }
      items.forEach(p => {
        const card = document.createElement('article');
        card.className = 'card';
        card.innerHTML = `\
          <img src="${p.img}" alt="${p.title}" />\
          <h3>${p.title}</h3>\
          <div style="color:var(--muted);font-size:13px">${p.desc}</div>\
          <div style="margin-top:auto" class="price-row">\
            <div style="font-weight:700">â‚¹${formatMoney(p.price)}</div>\
            <div>\
              <button class="btn" data-id="${p.id}">Add</button>\
            </div>\
          </div>`;
        productsEl.appendChild(card);
      })
    }

    function renderCart(){
      const cart = state.cart;
      const ids = Object.keys(cart).map(Number);
      cartListEl.innerHTML = '';
      if(!ids.length){ cartEmptyEl.style.display='block'; cartListEl.style.display='none'; cartCountEl.style.display='none'; totalEl.textContent='0'; return }

      cartEmptyEl.style.display='none'; cartListEl.style.display='flex'; cartCountEl.style.display='grid';
      cartCountEl.textContent = ids.reduce((s,id)=>s+cart[id],0);

      let grand = 0;
      ids.forEach(id => {
        const prod = state.products.find(p=>p.id===id);
        const qty = cart[id];
        const lineTotal = prod.price * qty;
        grand += lineTotal;

        const item = document.createElement('div');
        item.className = 'cart-item';
        item.innerHTML = `\
          <img src="${prod.img}" alt="${prod.title}" />\
          <div style="flex:1">\
            <div style="font-weight:700">${prod.title}</div>\
            <div style="color:var(--muted);font-size:13px">â‚¹${formatMoney(prod.price)} Ã— ${qty} = â‚¹${formatMoney(lineTotal)}</div>\
          </div>\
          <div style="display:flex;flex-direction:column;gap:6px;align-items:flex-end">\
            <div class=\"qty\">\
              <button data-op=\"dec\" data-id=\"${id}\">âˆ’</button>\
              <div style=\"min-width:20px;text-align:center\">${qty}</div>\
              <button data-op=\"inc\" data-id=\"${id}\">+</button>\
            </div>\
            <button data-op=\"remove\" data-id=\"${id}\" class=\"btn ghost\">Remove</button>\
          </div>`;
        cartListEl.appendChild(item);
      })
      totalEl.textContent = formatMoney(grand);
    }

    // ---------- Actions ----------
    function addToCart(id,qty=1){
      state.cart[id] = (state.cart[id]||0) + qty;
      saveCart(); renderCart(); openCart();
    }
    function updateQty(id,qty){
      if(qty<=0){ delete state.cart[id]; } else { state.cart[id] = qty }
      saveCart(); renderCart();
    }
    function removeFromCart(id){ delete state.cart[id]; saveCart(); renderCart(); }
    function clearCart(){ state.cart = {}; saveCart(); renderCart(); }

    function saveCart(){ localStorage.setItem('mini_cart', JSON.stringify(state.cart)); }

    // ---------- UI helpers ----------
    function openCart(){ cartEl.classList.add('open'); cartEl.setAttribute('aria-hidden','false') }
    function closeCart(){ cartEl.classList.remove('open'); cartEl.setAttribute('aria-hidden','true') }

    // ---------- Event wiring ----------
    // product add
    productsEl.addEventListener('click', e => {
      const btn = e.target.closest('button[data-id]');
      if(!btn) return;
      const id = Number(btn.getAttribute('data-id'));
      addToCart(id,1);
    })

    // cart toggle
    openCartBtn.addEventListener('click', () => {
      if(cartEl.classList.contains('open')) closeCart(); else openCart();
    })

    // cart list actions (inc, dec, remove)
    cartListEl.addEventListener('click', e => {
      const op = e.target.getAttribute('data-op');
      const id = Number(e.target.getAttribute('data-id'));
      if(!op) return;
      if(op === 'inc') updateQty(id, (state.cart[id]||0) + 1);
      if(op === 'dec') updateQty(id, (state.cart[id]||0) - 1);
      if(op === 'remove') removeFromCart(id);
    })

    // checkout
    checkoutBtn.addEventListener('click', () => {
      const ids = Object.keys(state.cart);
      if(!ids.length){ alert('Your cart is empty'); return }
      // simple demo checkout flow
      const total = totalEl.textContent;
      const confirmMsg = `Proceed to checkout? Total: â‚¹${total}`;
      if(confirm(confirmMsg)){
        // pretend to process payment
        alert('Order placed! Thank you â€” this is a demo.');
        clearCart();
        closeCart();
      }
    })

    // clear
    clearBtn.addEventListener('click', () => { if(confirm('Clear cart?')) clearCart(); })

    // global click to close cart when clicking outside
    document.addEventListener('click', (e) =>{
      if(!cartEl.classList.contains('open')) return;
      if(e.target.closest('#cart') || e.target.closest('#openCart')) return;
      closeCart();
    })

    // search & sort
    searchInput.addEventListener('input', () => applyFilters());
    sortSelect.addEventListener('change', () => applyFilters());

    function applyFilters(){
      const q = searchInput.value.trim().toLowerCase();
      const sort = sortSelect.value;
      let items = PRODUCTS.slice();
      if(q) items = items.filter(p => p.title.toLowerCase().includes(q) || p.desc.toLowerCase().includes(q));
      if(sort === 'price-asc') items.sort((a,b)=>a.price-b.price);
      if(sort === 'price-desc') items.sort((a,b)=>b.price-a.price);
      renderProducts(items);
    }

    // initial render
    renderProducts(state.products);
    renderCart();
  </script>
</body>
</html>